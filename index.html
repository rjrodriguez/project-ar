<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR simple — A-Frame + AR.js</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.7.1/aframe.min.js"></script>
    <!-- CDN A-Frame (versión estable) -->
    <!-- Cargar AR.js para A-Frame desde CDN (añade soporte de marcadores y tracking) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ar.js/2.1.1/aframe-ar.min.js"></script>
    <!-- CDN AR.js (aframe-ar build) -->
    <!-- Estilos básicos para que la escena ocupe toda la pantalla y muestre un pequeño overlay de instrucciones -->
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #overlay {
            position: absolute;
            top: 12px;
            left: 12px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 8px 12px;
            font-family: sans-serif;
            border-radius: 6px;
            font-size: 14px;
        }
    </style>
</head>

<body style="overflow:hidden;">

    <!-- Mensaje guía para el alumno -->
    <div id="overlay">Escanea el marcador HIRO con la cámara. Otorga permiso de cámara si el navegador lo solicita.
    </div>

    <!-- Primera y más simple escena A-Frame con AR.js activado (usa la webcam como fuente) -->
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- a-scene con AR.js: embedded evita modo VR nativo -->
        <!-- Marcador predefinido 'hiro' (marcador de ejemplo de AR.js) -->
        <a-marker preset="hiro">
            <!-- Etiqueta que define el área donde aparecerán los objetos 3D cuando se detecte el marcador -->
            <!-- Un cubo simple: posición (x y z), rotación y escala; material con color -->
            <a-box position="0 0.5 0" rotation="0 45 0" scale="0.6 0.6 0.6"
                material="color: #1565C0; metalness: 0.2; roughness: 0.7">
            </a-box> <!-- Box: el objeto 3D visible sobre el marcador -->

            <!-- Texto flotante sobre el cubo; value = texto a mostrar -->
            <a-text value="¡Hola, AR!" position="0 1.3 0" align="center" color="#FFFFFF" width="2"></a-text>
            <!-- Texto 3D legible sobre el marcador -->

            <!-- Un plano con una imagen (ejemplo de asset inline, sustituye src por tu imagen si quieres) -->
            <a-plane position="0 -0.1 0" rotation="-90 0 0" width="1" height="1"
                material="color: #222; opacity: 0.7"></a-plane> <!-- Base oscura bajo el objeto -->
        </a-marker> <!-- Fin del marcador 'hiro' -->

        <!-- Cámara de la escena: necesaria para que A-Frame renderice la vista en primera persona -->
        <a-entity camera></a-entity>
        <!-- Entidad que representa la cámara; AR.js conectará la webcam automáticamente -->
    </a-scene> <!-- Fin de la escena A-Frame/AR.js -->

    <!-- Pequeño script opcional que oculta el overlay cuando se detecta cámara (mejora UX) -->
    <script> /* Inicio script inline */
        // Detectar si la página tiene permiso para cámara y ocultar mensaje en caso afirmativo
        (async function () { // función autoejecutable asíncrona
            try {
                // Solicita permiso de cámara sin iniciar streaming pesado
                await navigator.mediaDevices.getUserMedia({ video: true });
                // Si fue exitoso, ocultar el overlay
                const ol = document.getElementById('overlay'); if (ol) ol.style.display = 'none';
            } catch (e) {
                // Si falla (permiso denegado o dispositivo sin cámara), se deja el overlay visible
                console.warn('No se pudo acceder a la cámara (posible denegación o navegador no compatible).', e);
            }
        })(); // fin función autoejecutable
    </script> <!-- Fin script -->

</body> <!-- Fin del cuerpo -->

</html> <!-- Fin del documento HTML -->